<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Clapkit: Clapkit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="clapkit-logo-sm.png"/></td>
  <td id="projectalign">
   <div id="projectname">Clapkit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Clapkit </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <img src="clapkit-logo.png" alt="" class="inline" title="Logo"/>    </p>
<p>Clapkit (CLassic APplication KIT) is a framework for developing applications for Classic Mac OS (System 7.x - Mac OS 9.x), basically a C++/object-oriented wrapper for Macintosh Toolbox functions.</p>
<p>It builds using <a href="https://github.com/autc04/Retro68">Retro68</a> on modern systems and is designed to make application development for Mac OS 7.x - 9.x easier by doing most of the manual work one has to do when it comes to Toolbox programming.</p>
<p>The goal is to eventually add Carbon/Cocoa and even Win32 support to allow cross-platform development.</p>
<h4><a class="anchor" id="autotoc_md0"></a>
Warning</h4>
<p>Clapkit is in very early stages of development. A lot of things are either not supported or how they work are subject to change.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Features</h2>
<ul>
<li>"Modern-style" wrappers for basic Macintosh Toolbox functions.<ul>
<li>Easily create windows (<a class="el" href="classCKWindow.html" title="Defines a window. Window type (modal, document) is determined by CKWindowInitParams and CKWindowType.">CKWindow</a>), controls (<a class="el" href="classCKButton.html" title="Defines a push button.">CKButton</a>, <a class="el" href="classCKLabel.html" title="Defines a text label.">CKLabel</a>, etc.) and objects (like timers with <a class="el" href="classCKTimer.html" title="Defines a timer that can execute code on a pre-defined interval.">CKTimer</a>) using modern C++ syntax and lambda expressions.</li>
</ul>
</li>
<li>Basic networking support with event-based MacTCP wrapper implementation.</li>
<li>Simple debug tools including debug logs and leaks checking.</li>
</ul>
<div class="image">
<img src="clapkit-screenshot.png" alt=""/>
<div class="caption">
Screenshot</div></div>
    <h2><a class="anchor" id="autotoc_md2"></a>
Installation</h2>
<p>To 'import' Clapkit, you can use FetchContent:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line">FetchContent_Declare(</div>
<div class="line">    clapkit</div>
<div class="line">    GIT_REPOSITORY https://github.com/macinlink/clapkit.git</div>
<div class="line">    GIT_TAG main</div>
<div class="line">)</div>
<div class="line">FetchContent_MakeAvailable(clapkit)</div>
<div class="line">target_link_libraries(my_project PRIVATE clapkit)</div>
</div><!-- fragment --><p>You may need CMakeLists.txt and .vscode/c_cpp_properties.json modified to point to your Retro68 installation. Example:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;configurations&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;Mac&quot;,</div>
<div class="line">            &quot;includePath&quot;: [</div>
<div class="line">                &quot;${workspaceFolder}/**&quot;,</div>
<div class="line">                &quot;${workspaceFolder}/**/**&quot;,</div>
<div class="line">                &quot;~/Retro68/InterfacesAndLibraries/**&quot;,</div>
<div class="line">                &quot;~/Retro68-build/toolchain/m68k-apple-macos/include/**&quot;,</div>
<div class="line">                &quot;~/git/clapkit/**&quot;</div>
<div class="line">            ],</div>
<div class="line">            &quot;defines&quot;: [],</div>
<div class="line">            &quot;compilerPath&quot;: &quot;&quot;,</div>
<div class="line">            &quot;cStandard&quot;: &quot;c17&quot;,</div>
<div class="line">            &quot;cppStandard&quot;: &quot;c++17&quot;,</div>
<div class="line">            &quot;intelliSenseMode&quot;: &quot;gcc-arm&quot;</div>
<div class="line">        }</div>
<div class="line">    ],</div>
<div class="line">    &quot;version&quot;: 4</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Usage</h2>
<h3><a class="anchor" id="autotoc_md4"></a>
Check out the documentation at &lt;a href="https://macinlink.github.io/clapkit/" &gt;https://macinlink.github.io/clapkit/&lt;/a&gt;</h3>
<h4><a class="anchor" id="autotoc_md5"></a>
&lt;strong&gt;Note: For a sample app, check out &lt;a href="https://github.com/macinlink/clapkit/tree/main/examples/kitchen-sink" &gt;The Kitchen Sink&lt;/a&gt; in the the &lt;tt&gt;Examples&lt;/tt&gt; folder.&lt;/strong&gt;</h4>
<p>Create an object for your app by subclassing CApp.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">class </span>MyNewApp: <span class="keyword">public</span> <a class="code hl_class" href="classCKApp.html">CKApp</a> {</div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">        MyNewApp() { }</div>
<div class="line">        ~MyNewApp() { }</div>
<div class="line">};</div>
<div class="ttc" id="aclassCKApp_html"><div class="ttname"><a href="classCKApp.html">CKApp</a></div><div class="ttdoc">Defines the main entry point for a Clapkit application.</div><div class="ttdef"><b>Definition</b> ckApp.h:58</div></div>
</div><!-- fragment --><p>Then 'start' your app:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">app = <a class="code hl_define" href="group__Memory.html#ga7ff6848f4ceb029a9897bf5c7490447f">CKNew</a> MyNewApp();</div>
<div class="ttc" id="agroup__Memory_html_ga7ff6848f4ceb029a9897bf5c7490447f"><div class="ttname"><a href="group__Memory.html#ga7ff6848f4ceb029a9897bf5c7490447f">CKNew</a></div><div class="ttdeci">#define CKNew</div><div class="ttdoc">Use instead of new.</div><div class="ttdef"><b>Definition</b> ckMemory.h:66</div></div>
</div><!-- fragment --><p>You can create a simple window using just a few lines of code:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_class" href="classCKWindow.html">CKWindow</a>* window = app-&gt;CKNewWindow(<a class="code hl_struct" href="structCKWindowInitParams.html">CKWindowInitParams</a>(<a class="code hl_struct" href="structCKSize.html">CKSize</a>(300, 70)));</div>
<div class="line">window-&gt;<a class="code hl_function" href="classCKWindow.html#a7f527ec5e290594f23f336779a9bfdfd">SetTitle</a>(<span class="stringliteral">&quot;Timer&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classCKLabel.html">CKLabel</a>* label = <a class="code hl_define" href="group__Memory.html#ga7ff6848f4ceb029a9897bf5c7490447f">CKNew</a> <a class="code hl_class" href="classCKLabel.html">CKLabel</a>(<a class="code hl_struct" href="structCKSize.html">CKSize</a>(300 - 20, 20));</div>
<div class="line">label-&gt;<a class="code hl_variable" href="classCKControl.html#a5c5adca592811f7502ea2b9b91a05a7a">rect</a>-&gt;origin-&gt;x = 10;</div>
<div class="line">label-&gt;<a class="code hl_variable" href="classCKControl.html#a5c5adca592811f7502ea2b9b91a05a7a">rect</a>-&gt;origin-&gt;y = 10;</div>
<div class="line">label-&gt;<a class="code hl_function" href="classCKLabel.html#a589b71176b6c70fa1dedbed4bd4fdaef">SetText</a>(<span class="stringliteral">&quot;Hello world!&quot;</span>);</div>
<div class="line">window-&gt;<a class="code hl_function" href="classCKWindow.html#a1f39e6b292b49f1c6335f92fe4b4baec">AddControl</a>(label);</div>
<div class="line"> </div>
<div class="line">window-&gt;<a class="code hl_function" href="classCKWindow.html#a1d2ee521b3f7aea46e628063b6498429">Center</a>();</div>
<div class="line">window-&gt;<a class="code hl_function" href="classCKWindow.html#aa0998d802e85a89e45d4d35536b6764f">Show</a>();</div>
<div class="ttc" id="aclassCKControl_html_a5c5adca592811f7502ea2b9b91a05a7a"><div class="ttname"><a href="classCKControl.html#a5c5adca592811f7502ea2b9b91a05a7a">CKControl::rect</a></div><div class="ttdeci">CKProperty&lt; CKRect &gt; rect</div><div class="ttdef"><b>Definition</b> ckControl.h:105</div></div>
<div class="ttc" id="aclassCKLabel_html"><div class="ttname"><a href="classCKLabel.html">CKLabel</a></div><div class="ttdoc">Defines a text label.</div><div class="ttdef"><b>Definition</b> ckLabel.h:24</div></div>
<div class="ttc" id="aclassCKLabel_html_a589b71176b6c70fa1dedbed4bd4fdaef"><div class="ttname"><a href="classCKLabel.html#a589b71176b6c70fa1dedbed4bd4fdaef">CKLabel::SetText</a></div><div class="ttdeci">virtual void SetText(const char *text)</div><div class="ttdef"><b>Definition</b> ckLabel.cpp:240</div></div>
<div class="ttc" id="aclassCKWindow_html"><div class="ttname"><a href="classCKWindow.html">CKWindow</a></div><div class="ttdoc">Defines a window. Window type (modal, document) is determined by CKWindowInitParams and CKWindowType.</div><div class="ttdef"><b>Definition</b> ckWindow.h:91</div></div>
<div class="ttc" id="aclassCKWindow_html_a1d2ee521b3f7aea46e628063b6498429"><div class="ttname"><a href="classCKWindow.html#a1d2ee521b3f7aea46e628063b6498429">CKWindow::Center</a></div><div class="ttdeci">void Center()</div><div class="ttdef"><b>Definition</b> ckWindow.cpp:200</div></div>
<div class="ttc" id="aclassCKWindow_html_a1f39e6b292b49f1c6335f92fe4b4baec"><div class="ttname"><a href="classCKWindow.html#a1f39e6b292b49f1c6335f92fe4b4baec">CKWindow::AddControl</a></div><div class="ttdeci">bool AddControl(CKControl *control)</div><div class="ttdef"><b>Definition</b> ckWindow.cpp:235</div></div>
<div class="ttc" id="aclassCKWindow_html_a7f527ec5e290594f23f336779a9bfdfd"><div class="ttname"><a href="classCKWindow.html#a7f527ec5e290594f23f336779a9bfdfd">CKWindow::SetTitle</a></div><div class="ttdeci">void SetTitle(const char *title)</div><div class="ttdef"><b>Definition</b> ckWindow.cpp:140</div></div>
<div class="ttc" id="aclassCKWindow_html_aa0998d802e85a89e45d4d35536b6764f"><div class="ttname"><a href="classCKWindow.html#aa0998d802e85a89e45d4d35536b6764f">CKWindow::Show</a></div><div class="ttdeci">void Show()</div><div class="ttdef"><b>Definition</b> ckWindow.cpp:167</div></div>
<div class="ttc" id="astructCKSize_html"><div class="ttname"><a href="structCKSize.html">CKSize</a></div><div class="ttdoc">Defines a rectangular area.</div><div class="ttdef"><b>Definition</b> ckTypes.h:180</div></div>
<div class="ttc" id="astructCKWindowInitParams_html"><div class="ttname"><a href="structCKWindowInitParams.html">CKWindowInitParams</a></div><div class="ttdoc">Initialization parameters for a CKWindow.</div><div class="ttdef"><b>Definition</b> ckWindow.h:46</div></div>
</div><!-- fragment --><p>Each control type is in it's own header file that you need to import:</p>
<ul>
<li><a class="el" href="classCKLabel.html" title="Defines a text label.">CKLabel</a> is defined in <code><a class="el" href="ckLabel_8h.html">ckLabel.h</a></code></li>
<li><a class="el" href="classCKButton.html" title="Defines a push button.">CKButton</a> is defined in <code><a class="el" href="ckButton_8h.html">ckButton.h</a></code>, etc.</li>
<li>At minimum, you'll need to import <code><a class="el" href="ckApp_8h.html">ckApp.h</a></code></li>
</ul>
<p>Add Event Handlers to listen to clicks, keydowns, etc:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_class" href="classCKButton.html">CKButton</a>* myButton = <a class="code hl_define" href="group__Memory.html#ga7ff6848f4ceb029a9897bf5c7490447f">CKNew</a> <a class="code hl_class" href="classCKButton.html">CKButton</a>(<a class="code hl_struct" href="structCKSize.html">CKSize</a>(100, <a class="code hl_define" href="group__Utils.html#gaa26011a5ddcbe4034a0d1e7589f90353">kCKButtonHeight</a>));</div>
<div class="line">window-&gt;<a class="code hl_function" href="classCKWindow.html#a1f39e6b292b49f1c6335f92fe4b4baec">AddControl</a>(myButton);</div>
<div class="line">myButton-&gt;<a class="code hl_function" href="classCKObject.html#a54861efaee9c2c8a2a7a7ec0d34da962">AddHandler</a>(<a class="code hl_enumvalue" href="group__Types.html#gga70df7d5fb2893b258e7a55b2e949308caa8affc088cbca89fa20dbd98c91362e4">CKEventType::click</a>, [app, window](<a class="code hl_struct" href="structCKEvent.html">CKEvent</a> e) {</div>
<div class="line">    app-&gt;CKNewMsgBoxNote(<span class="stringliteral">&quot;Thanks for clicking me!&quot;</span>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;No problem!&quot;</span>);</div>
<div class="line">});</div>
<div class="ttc" id="aclassCKButton_html"><div class="ttname"><a href="classCKButton.html">CKButton</a></div><div class="ttdoc">Defines a push button.</div><div class="ttdef"><b>Definition</b> ckButton.h:23</div></div>
<div class="ttc" id="aclassCKObject_html_a54861efaee9c2c8a2a7a7ec0d34da962"><div class="ttname"><a href="classCKObject.html#a54861efaee9c2c8a2a7a7ec0d34da962">CKObject::AddHandler</a></div><div class="ttdeci">virtual void AddHandler(CKEventType type, CKEventHandlerFunc cb)</div><div class="ttdef"><b>Definition</b> ckObject.cpp:28</div></div>
<div class="ttc" id="agroup__Types_html_gga70df7d5fb2893b258e7a55b2e949308caa8affc088cbca89fa20dbd98c91362e4"><div class="ttname"><a href="group__Types.html#gga70df7d5fb2893b258e7a55b2e949308caa8affc088cbca89fa20dbd98c91362e4">CKEventType::click</a></div><div class="ttdeci">@ click</div><div class="ttdoc">User clicked on window/control.</div></div>
<div class="ttc" id="agroup__Utils_html_gaa26011a5ddcbe4034a0d1e7589f90353"><div class="ttname"><a href="group__Utils.html#gaa26011a5ddcbe4034a0d1e7589f90353">kCKButtonHeight</a></div><div class="ttdeci">#define kCKButtonHeight</div><div class="ttdoc">Suggested button height for platform.</div><div class="ttdef"><b>Definition</b> ckPlatform.h:26</div></div>
<div class="ttc" id="astructCKEvent_html"><div class="ttname"><a href="structCKEvent.html">CKEvent</a></div><div class="ttdoc">Defines an event raised by the framework, mostly for user actions.</div><div class="ttdef"><b>Definition</b> ckTypes.h:496</div></div>
</div><!-- fragment --><p>You'll need to write a run-loop as well:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keywordflow">while</span>(1) {</div>
<div class="line">    <span class="keywordtype">int</span> result = app-&gt;Loop(5);</div>
<div class="line">    <span class="comment">// Do whatever else you need to do in the background..</span></div>
<div class="line">    <span class="keywordflow">if</span> (result != 0) {</div>
<div class="line">        <span class="comment">// Exit the loop, done here.</span></div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
A test app</h2>
<p>A simple app can be as short as this:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="ckApp_8h.html">ckApp.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="classCKApp.html">CKApp</a>* app = <a class="code hl_define" href="group__Memory.html#ga7ff6848f4ceb029a9897bf5c7490447f">CKNew</a> <a class="code hl_class" href="classCKApp.html">CKApp</a>();</div>
<div class="line">    app-&gt;<a class="code hl_function" href="classCKApp.html#adc74c054aba87cee315564e0e50cc40d">CKNewMsgBoxNote</a>(<span class="stringliteral">&quot;Hello world!&quot;</span>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;OK&quot;</span>, <span class="keyword">nullptr</span>, [app](<span class="keywordtype">int</span> button) {</div>
<div class="line">        app-&gt;<a class="code hl_function" href="classCKApp.html#a7b94f96e3d42ec7dc9c375d4ea6707c9">CKQuit</a>();</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Run loop: without this, your app will quit as soon as it launches.</span></div>
<div class="line">    <span class="keywordflow">while</span> (!app-&gt;<a class="code hl_function" href="classCKApp.html#aa3bfc5160ead7264578e7992ff275792">CKLoop</a>(5));</div>
<div class="line">    <span class="keyword">delete</span> app;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="ackApp_8h_html"><div class="ttname"><a href="ckApp_8h.html">ckApp.h</a></div></div>
<div class="ttc" id="aclassCKApp_html_a7b94f96e3d42ec7dc9c375d4ea6707c9"><div class="ttname"><a href="classCKApp.html#a7b94f96e3d42ec7dc9c375d4ea6707c9">CKApp::CKQuit</a></div><div class="ttdeci">void CKQuit()</div><div class="ttdef"><b>Definition</b> ckApp.cpp:178</div></div>
<div class="ttc" id="aclassCKApp_html_aa3bfc5160ead7264578e7992ff275792"><div class="ttname"><a href="classCKApp.html#aa3bfc5160ead7264578e7992ff275792">CKApp::CKLoop</a></div><div class="ttdeci">int CKLoop(int waitTime=60)</div><div class="ttdoc">Main event loop, handling events. Needs to be called as much as possible.</div><div class="ttdef"><b>Definition</b> ckApp.cpp:113</div></div>
<div class="ttc" id="aclassCKApp_html_adc74c054aba87cee315564e0e50cc40d"><div class="ttname"><a href="classCKApp.html#adc74c054aba87cee315564e0e50cc40d">CKApp::CKNewMsgBoxNote</a></div><div class="ttdeci">CKWindow * CKNewMsgBoxNote(const char *message, const char *title=nullptr, const char *btnOk=&quot;OK&quot;, const char *btnCancel=nullptr, std::function&lt; void(int button)&gt; callback=0)</div><div class="ttdoc">Create and show an alert. Alerts are non-blocking. btnCancel is optional and only shown if set to a n...</div><div class="ttdef"><b>Definition</b> ckApp.cpp:302</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Networking</h2>
<p>Though currently extremely buggy, a TCP client is also available via MacTCP.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_class" href="classCKNetClient.html">CKNetClient</a>* socket = <a class="code hl_define" href="group__Memory.html#ga7ff6848f4ceb029a9897bf5c7490447f">CKNew</a> <a class="code hl_class" href="classCKNetClient.html">CKNetClient</a>();</div>
<div class="line"><a class="code hl_typedef" href="group__Types.html#gac0ae0c9c7b23ee5fb04991be442eafbe">CKError</a> res = socket-&gt;<a class="code hl_function" href="classCKNetClient.html#ae134d50ca266a97b41315a73e0de41c7">Connect</a>(<span class="stringliteral">&quot;google.com&quot;</span>, 80);</div>
<div class="line"> </div>
<div class="line">socket-&gt;<a class="code hl_function" href="classCKObject.html#a54861efaee9c2c8a2a7a7ec0d34da962">AddHandler</a>(<a class="code hl_enumvalue" href="group__Types.html#gga70df7d5fb2893b258e7a55b2e949308caf5cf820bc57717b88d045b886f5cd4ca">CKEventType::tcpConnected</a>, [lbl2, socket](<a class="code hl_struct" href="structCKEvent.html">CKEvent</a> e) {</div>
<div class="line">  <a class="code hl_define" href="ckUtils_8h.html#aac58ca8b52aa909e8e4aafa1236d6591">CKLog</a>(<span class="stringliteral">&quot;Connected!&quot;</span>);</div>
<div class="line">  <span class="keywordtype">char</span> data[256];</div>
<div class="line">  sprintf(data, <span class="stringliteral">&quot;GET / HTTP/1.1\nHost: google.com\n\n&quot;</span>);</div>
<div class="line">  socket-&gt;<a class="code hl_function" href="classCKNetClient.html#a3aa65af7d861b28d9dd7092d921b9dd7">Write</a>(data, strlen(data));</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">socket-&gt;<a class="code hl_function" href="classCKObject.html#a54861efaee9c2c8a2a7a7ec0d34da962">AddHandler</a>(<a class="code hl_enumvalue" href="group__Types.html#gga70df7d5fb2893b258e7a55b2e949308cada05646d2484b252a86cf4501a14adae">CKEventType::tcpReceivedData</a>, [lbl2, socket](<a class="code hl_struct" href="structCKEvent.html">CKEvent</a> e) {</div>
<div class="line">  <span class="keywordtype">void</span>* buffer = <a class="code hl_define" href="group__Memory.html#ga70051e6ffbc6fa548137bd1f415ee2ce">CKMalloc</a>(512);</div>
<div class="line">  <span class="keywordtype">short</span> readBytes;</div>
<div class="line">  <a class="code hl_typedef" href="group__Types.html#gac0ae0c9c7b23ee5fb04991be442eafbe">CKError</a> r = socket-&gt;<a class="code hl_function" href="classCKNetClient.html#aaa368971ae1ef88d9c274f2c566674d8">Read</a>(buffer, 512, &amp;readBytes);</div>
<div class="line">  <span class="keywordflow">if</span> (r != <a class="code hl_define" href="group__Types.html#gae9f3674acce54885b7bc0c098dcbf581">CKPass</a>) {</div>
<div class="line">    lbl2-&gt;SetText(<span class="stringliteral">&quot;Read failed!&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line">  <a class="code hl_define" href="ckUtils_8h.html#aac58ca8b52aa909e8e4aafa1236d6591">CKLog</a>(<span class="stringliteral">&quot;Read %d bytes.&quot;</span>, readBytes);</div>
<div class="line">  <a class="code hl_define" href="group__Memory.html#gaf8071f6a8f2792631d72b651e93217aa">CKFree</a>(buffer);</div>
<div class="line">});</div>
<div class="ttc" id="ackUtils_8h_html_aac58ca8b52aa909e8e4aafa1236d6591"><div class="ttname"><a href="ckUtils_8h.html#aac58ca8b52aa909e8e4aafa1236d6591">CKLog</a></div><div class="ttdeci">#define CKLog(s,...)</div><div class="ttdoc">Wrapper for logging.</div><div class="ttdef"><b>Definition</b> ckUtils.h:45</div></div>
<div class="ttc" id="aclassCKNetClient_html"><div class="ttname"><a href="classCKNetClient.html">CKNetClient</a></div><div class="ttdoc">Defines a client TCP socket.</div><div class="ttdef"><b>Definition</b> ckNetClient.h:21</div></div>
<div class="ttc" id="aclassCKNetClient_html_a3aa65af7d861b28d9dd7092d921b9dd7"><div class="ttname"><a href="classCKNetClient.html#a3aa65af7d861b28d9dd7092d921b9dd7">CKNetClient::Write</a></div><div class="ttdeci">virtual CKError Write(const void *data, UInt32 len)</div><div class="ttdef"><b>Definition</b> ckNetClient.cpp:133</div></div>
<div class="ttc" id="aclassCKNetClient_html_aaa368971ae1ef88d9c274f2c566674d8"><div class="ttname"><a href="classCKNetClient.html#aaa368971ae1ef88d9c274f2c566674d8">CKNetClient::Read</a></div><div class="ttdeci">virtual CKError Read(void *out, short len, short *actuallyRead)</div><div class="ttdef"><b>Definition</b> ckNetClient.cpp:100</div></div>
<div class="ttc" id="aclassCKNetClient_html_ae134d50ca266a97b41315a73e0de41c7"><div class="ttname"><a href="classCKNetClient.html#ae134d50ca266a97b41315a73e0de41c7">CKNetClient::Connect</a></div><div class="ttdeci">virtual CKError Connect(const char *address, UInt16 port)</div><div class="ttdef"><b>Definition</b> ckNetClient.cpp:26</div></div>
<div class="ttc" id="agroup__Memory_html_ga70051e6ffbc6fa548137bd1f415ee2ce"><div class="ttname"><a href="group__Memory.html#ga70051e6ffbc6fa548137bd1f415ee2ce">CKMalloc</a></div><div class="ttdeci">#define CKMalloc(sz)</div><div class="ttdoc">Use instead of malloc.</div><div class="ttdef"><b>Definition</b> ckMemory.h:54</div></div>
<div class="ttc" id="agroup__Memory_html_gaf8071f6a8f2792631d72b651e93217aa"><div class="ttname"><a href="group__Memory.html#gaf8071f6a8f2792631d72b651e93217aa">CKFree</a></div><div class="ttdeci">#define CKFree(ptr)</div><div class="ttdoc">Use instead of free.</div><div class="ttdef"><b>Definition</b> ckMemory.h:60</div></div>
<div class="ttc" id="agroup__Types_html_gac0ae0c9c7b23ee5fb04991be442eafbe"><div class="ttname"><a href="group__Types.html#gac0ae0c9c7b23ee5fb04991be442eafbe">CKError</a></div><div class="ttdeci">int32_t CKError</div><div class="ttdoc">Return type for functions that might return an error. Also see: CKPass and CKErrorCode.</div><div class="ttdef"><b>Definition</b> ckTypes.h:27</div></div>
<div class="ttc" id="agroup__Types_html_gae9f3674acce54885b7bc0c098dcbf581"><div class="ttname"><a href="group__Types.html#gae9f3674acce54885b7bc0c098dcbf581">CKPass</a></div><div class="ttdeci">#define CKPass</div><div class="ttdoc">Functions that return CKError return CKPass on success.</div><div class="ttdef"><b>Definition</b> ckTypes.h:33</div></div>
<div class="ttc" id="agroup__Types_html_gga70df7d5fb2893b258e7a55b2e949308cada05646d2484b252a86cf4501a14adae"><div class="ttname"><a href="group__Types.html#gga70df7d5fb2893b258e7a55b2e949308cada05646d2484b252a86cf4501a14adae">CKEventType::tcpReceivedData</a></div><div class="ttdeci">@ tcpReceivedData</div><div class="ttdoc">TCP socket has data to read.</div></div>
<div class="ttc" id="agroup__Types_html_gga70df7d5fb2893b258e7a55b2e949308caf5cf820bc57717b88d045b886f5cd4ca"><div class="ttname"><a href="group__Types.html#gga70df7d5fb2893b258e7a55b2e949308caf5cf820bc57717b88d045b886f5cd4ca">CKEventType::tcpConnected</a></div><div class="ttdeci">@ tcpConnected</div><div class="ttdoc">TCP socket has connected.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Debugging &amp; Leaks Checking</h2>
<p>If compiled using debug mode (<code>cmake -DCMAKE_BUILD_TYPE=Debug</code>), Clapkit will not only print debug messages into the Macsbug console using user breaks, but will also keep track of memory usage and try to list leaks on quit, by creating a text file on the same folder the app was run.</p>
<p>Writing debug logs is very simple - just use <code>CKLog</code>. They'll be stripped out in Release mode.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><a class="code hl_define" href="ckUtils_8h.html#aac58ca8b52aa909e8e4aafa1236d6591">CKLog</a>(<span class="stringliteral">&quot;The current count is %d&quot;</span>, count);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Contributing</h2>
<p>Clapkit is in very, very early stages of development so any kind of contributions are welcome. For code contributions, please check out <a href="https://github.com/macinlink/clapkit/blob/main/.clang-format">.clang-format</a> and make sure your code fits the style.</p>
<p>While Carbon/Cocoa/Win32 is an <em>eventual</em> goal, the current focus is on Mac OS 7.x-9.x so please refrain from any Carbonization, etc. effort for just now. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
